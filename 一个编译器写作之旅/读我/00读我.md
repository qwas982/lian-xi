00读我.md

# 第0部分：介绍
我决定开始一段编译器编写之旅。过去我写过一些汇编器，还为一种无类型语言编写了一个简单的编译器。但我从未编写过一个可以自我编译的编译器。所以这就是我要去的地方。

作为这个过程的一部分，我将记录下我的工作，以便其他人可以跟随。这也将帮助我澄清我的思想和想法。希望您和我都会发现这有用！

旅程的目标
以下是我在这段旅程中的目标和非目标：

+编写一个自我编译的编译器。如果编译器能够编译自身，那么它就可以称为一个“真正的”编译器。
+针对至少一个真实的硬件平台。我见过一些生成代码用于假设机器的编译器。我希望我的编译器能在真实的硬件上工作。此外，如果可能，我希望编写编译器以支持不同硬件平台的多个后端。
+先实践再研究。在编译器领域有很多研究。我想从绝对零开始这段旅程，所以我会采取实践性的方法而不是理论性的方法。也就是说，有时我需要引入（和实现）一些基于理论的东西。
+遵循KISS原则：保持简单，愚蠢！我肯定会在这里使用肯·汤普森的原则：“如果有疑问，请使用 brute force”。
+采用许多小步骤来达到最终目标。我将把旅程分成许多简单的步骤，而不是取得大的飞跃。这将使每个新加入编译器的东西都是一件小而容易消化的事情。

# 目标语言
选择目标语言是困难的。如果我选择像Python、Go等高级语言，那么我将不得不实现一整堆库和类，因为它们都是内置于语言中的。

我可以写一个类似Lisp的语言的编译器，但这些可以很容易地完成。

相反，我退回到了老套路，打算为C的一个子集编写一个编译器，以允许编译器自我编译。

对于某些C的子集来说，C仅仅比汇编语言高一步，这将有助于使将C代码编译为汇编代码的任务变得更加容易。哦，我也喜欢C。

编译器的基本工作原理
编译器的工作是将一个语言（通常是高级语言）的输入转换为另一种输出语言（通常是低级语言，而不是输入的高级语言）。主要步骤如下：

+进行词法分析 ↗，以识别词法元素。在几种语言中，=与==是不同的，因此您不能只读取单个=。我们称这些词汇元素为标记。
+解析输入，即识别输入的语法和结构元素，并确保它们符合语言的语法。例如，您的语言可能具有以下决策结构：

Copy
      if (x < 23) {
        print("x is smaller than 23\n");
      }
但在另一种语言中，您可能会写：

Copy
      if (x < 23):
        print("x is smaller than 23\n")
这也是编译器可以检测语法错误的地方，例如第一个print语句末尾缺少分号。

+对输入进行语义分析 ↗，即理解输入的含义。实际上，这与识别语法和结构不同。例如，在英语中，一个句子可能具有形式<主语> <动词> <形容词> <宾语>。以下两个句子具有相同的结构，但完全不同的含义：

Copy
          David ate lovely bananas.
          Jennifer hates green tomatoes.
+将输入的含义翻译成另一种语言。在这里，我们将输入逐部分转换为低级语言。

#资源
网络上有很多有关编译器的资源。以下是我将要查看的资源。

#学习资源
如果你想从一些书籍、论文和工具开始学习编译器，我强烈推荐这个列表：

Ahmad Alhour的编译器、解释器和运行时的资源精选列表 ↗
#现有编译器
虽然我将要构建自己的编译器，但我计划查看其他编译器以获取灵感，可能还会借用其中的一些代码。以下是我将要查看的编译器：

Nils M Holm的SubC ↗
Robert Swierczek的Swieros C Compiler ↗
Fabrice Bellard的fbcc ↗
Fabrice Bellard和其他人的tcc ↗
Yuichiro Nakada的catc ↗
Jim Huang的amacc ↗
Ron Cain、James E. Hendrix和其他人的Small C ↗
特别是，我将使用SubC编译器的许多想法和一些代码。

#设置开发环境
假设你想跟随我一起走这个旅程，这是你需要的内容。我将使用Linux开发环境，所以下载并设置你喜欢的Linux系统：我使用的是Lubuntu 18.04。

我将面向两个硬件平台：Intel x86-64和32位ARM。我会将PC运行Lubuntu 18.04作为Intel目标，将运行Raspbian的Raspberry Pi作为ARM目标。

在Intel平台上，我们将需要现有的C编译器。因此，安装这个软件包（我给出Ubuntu/Debian命令）：

Copy
  $ sudo apt-get install build-essential
如果有任何其他工具需要在一个原始的Linux系统上，让我知道。

最后，克隆此Github存储库的副本。

#下一步
在我们编写编译器的旅程的下一部分中，我们将从扫描输入文件并找到是我们语言的词法元素的token的代码开始。下一步(../01_Scanner/Readme.md)

