/**
 * 解释器核心.h
 * WebAssembly 解释器核心接口
 */

#ifndef 解释器核心_H
#define 解释器核心_H

#include "数据结构.h"

/**
 * 创建解释器
 * @param 模块 模块指针
 * @return 解释器指针
 */
结构_解释器* 创建解释器(结构_模块* 模块);

/**
 * 销毁解释器
 * @param 解释器 解释器指针
 */
void 销毁解释器(结构_解释器* 解释器);

/**
 * 调用函数
 * @param 解释器 解释器
 * @param 函数索引 函数索引
 * @param 参数 参数数组
 * @param 参数数 参数数量
 * @param 返回值 返回值输出
 * @return 错误码
 */
int 调用函数(结构_解释器* 解释器, uint32_t 函数索引, 
             结构_栈值* 参数, uint32_t 参数数, 结构_栈值* 返回值);

/**
 * 执行主循环
 * @param 解释器 解释器
 * @return 错误码
 */
int 执行循环(结构_解释器* 解释器);

/**
 * 执行单条指令
 * @param 解释器 解释器
 * @param 操作码 操作码
 * @return 错误码
 */
int 执行指令(结构_解释器* 解释器, uint8_t 操作码);

#endif /* 解释器核心_H */
