"""
WebAssembly 指令枚举定义
对应原 opcode.h 文件
"""
from enum import IntEnum, auto


class 操作码(IntEnum):
    """WebAssembly MVP 操作码枚举 (178条指令)"""
    
    # 控制流指令 (0x00-0x0F)
    不可达 = 0x00
    空操作 = 0x01
    块开始 = 0x02
    循环开始 = 0x03
    条件分支 = 0x04
    否则分支 = 0x05
    结束标记 = 0x0B
    分支 = 0x0C
    条件分支表 = 0x0E
    返回 = 0x0F
    
    # 参数指令 (0x1A-0x1B)
    丢弃 = 0x1A
    选择 = 0x1B
    
    # 变量访问指令 (0x20-0x24)
    局部变量读取 = 0x20
    局部变量写入 = 0x21
    局部变量读取32 = 0x22
    局部变量写入32 = 0x23
    全局变量读取 = 0x24
    全局变量写入 = 0x25
    
    # 内存读取指令 - i32 (0x28-0x2C)
    内存读取32位 = 0x28
    内存读取8位有符号扩展32 = 0x2C
    内存读取8位无符号扩展32 = 0x2D
    内存读取16位有符号扩展32 = 0x2E
    内存读取16位无符号扩展32 = 0x2F
    
    # 内存读取指令 - i64 (0x29, 0x30-0x35)
    内存读取64位 = 0x29
    内存读取8位有符号扩展64 = 0x30
    内存读取8位无符号扩展64 = 0x31
    内存读取16位有符号扩展64 = 0x32
    内存读取16位无符号扩展64 = 0x33
    内存读取32位有符号扩展64 = 0x34
    内存读取32位无符号扩展64 = 0x35
    
    # 内存读取指令 - f32/f64 (0x2A-0x2B)
    内存读取单精度浮点 = 0x2A
    内存读取双精度浮点 = 0x2B
    
    # 内存写入指令 - i32 (0x36-0x3A)
    内存写入32位 = 0x36
    内存写入8位32 = 0x3A
    内存写入16位32 = 0x3B
    
    # 内存写入指令 - i64 (0x37, 0x3C-0x3E)
    内存写入64位 = 0x37
    内存写入8位64 = 0x3C
    内存写入16位64 = 0x3D
    内存写入32位64 = 0x3E
    
    # 内存写入指令 - f32/f64 (0x38-0x39)
    内存写入单精度浮点 = 0x38
    内存写入双精度浮点 = 0x39
    
    # 内存管理指令 (0x3F-0x40)
    内存大小 = 0x3F
    内存增长 = 0x40
    
    # i32 常量与一元运算 (0x41-0x45)
    常量32位 = 0x41
    等于零判断32 = 0x45
    
    # i32 二元运算 - 比较 (0x46-0x4F)
    等于判断32 = 0x46
    不等于判断32 = 0x47
    小于有符号32 = 0x48
    小于无符号32 = 0x49
    大于有符号32 = 0x4A
    大于无符号32 = 0x4B
    小于等于有符号32 = 0x4C
    小于等于无符号32 = 0x4D
    大于等于有符号32 = 0x4E
    大于等于无符号32 = 0x4F
    
    # i32 二元运算 - 算术 (0x6A-0x71)
    加法32 = 0x6A
    减法32 = 0x6B
    乘法32 = 0x6C
    除法有符号32 = 0x6D
    除法无符号32 = 0x6E
    取余有符号32 = 0x6F
    取余无符号32 = 0x70
    与运算32 = 0x71
    或运算32 = 0x72
    异或运算32 = 0x73
    左移32 = 0x74
    右移有符号32 = 0x75
    右移无符号32 = 0x76
    循环左移32 = 0x77
    循环右移32 = 0x78
    
    # i64 常量与一元运算 (0x42-0x51)
    常量64位 = 0x42
    等于零判断64 = 0x50
    
    # i64 二元运算 - 比较 (0x51-0x5A)
    等于判断64 = 0x51
    不等于判断64 = 0x52
    小于有符号64 = 0x53
    小于无符号64 = 0x54
    大于有符号64 = 0x55
    大于无符号64 = 0x56
    小于等于有符号64 = 0x57
    小于等于无符号64 = 0x58
    大于等于有符号64 = 0x59
    大于等于无符号64 = 0x5A
    
    # i64 二元运算 - 算术 (0x7C-0x83)
    加法64 = 0x7C
    减法64 = 0x7D
    乘法64 = 0x7E
    除法有符号64 = 0x7F
    除法无符号64 = 0x80
    取余有符号64 = 0x81
    取余无符号64 = 0x82
    与运算64 = 0x83
    或运算64 = 0x84
    异或运算64 = 0x85
    左移64 = 0x86
    右移有符号64 = 0x87
    右移无符号64 = 0x88
    循环左移64 = 0x89
    循环右移64 = 0x8A
    
    # f32 常量与一元运算 (0x43-0x61)
    常量单精度浮点 = 0x43
    取绝对值单精度 = 0x8B
    取负单精度 = 0x8C
    向上取整单精度 = 0x8D
    向下取整单精度 = 0x8E
    向零取整单精度 = 0x8F
    平方根单精度 = 0x91
    
    # f32 二元运算 - 比较 (0x5B-0x60)
    等于判断单精度 = 0x5B
    不等于判断单精度 = 0x5C
    小于单精度 = 0x5D
    大于单精度 = 0x5E
    小于等于单精度 = 0x5F
    大于等于单精度 = 0x60
    
    # f32 二元运算 - 算术 (0x92-0x98)
    加法单精度 = 0x92
    减法单精度 = 0x93
    乘法单精度 = 0x94
    除法单精度 = 0x95
    取最小值单精度 = 0x96
    取最大值单精度 = 0x97
    复制符号单精度 = 0x98
    
    # f64 常量与一元运算 (0x44-0x67)
    常量双精度浮点 = 0x44
    取绝对值双精度 = 0x99
    取负双精度 = 0x9A
    向上取整双精度 = 0x9B
    向下取整双精度 = 0x9C
    向零取整双精度 = 0x9D
    平方根双精度 = 0x9F
    
    # f64 二元运算 - 比较 (0x61-0x66)
    等于判断双精度 = 0x61
    不等于判断双精度 = 0x62
    小于双精度 = 0x63
    大于双精度 = 0x64
    小于等于双精度 = 0x65
    大于等于双精度 = 0x66
    
    # f64 二元运算 - 算术 (0xA0-0xA6)
    加法双精度 = 0xA0
    减法双精度 = 0xA1
    乘法双精度 = 0xA2
    除法双精度 = 0xA3
    取最小值双精度 = 0xA4
    取最大值双精度 = 0xA5
    复制符号双精度 = 0xA6
    
    # 类型转换 - i32 (0x67-0x69)
    截断32位有符号 = 0x67
    截断32位无符号 = 0x68
    截断64位有符号32 = 0xAA
    截断64位无符号32 = 0xAB
    浮点转32位有符号 = 0xB2
    浮点转32位无符号 = 0xB3
    双精度转32位有符号 = 0xB4
    双精度转32位无符号 = 0xB5
    截断饱和32位有符号 = 0xFC
    截断饱和32位无符号 = 0xFD
    
    # 类型转换 - i64 (0xAC-0xB1)
    扩展有符号64 = 0xAC
    扩展无符号64 = 0xAD
    截断64位有符号64 = 0xAE
    截断64位无符号64 = 0xAF
    浮点转64位有符号 = 0xB6
    浮点转64位无符号 = 0xB7
    双精度转64位有符号 = 0xB8
    双精度转64位无符号 = 0xB9
    截断饱和64位有符号 = 0xFE
    截断饱和64位无符号 = 0xFF
    
    # 类型转换 - f32 (0xB2-0xBB)
    转换32位有符号单精度 = 0xB2
    转换32位无符号单精度 = 0xB3
    转换64位有符号单精度 = 0xB4
    转换64位无符号单精度 = 0xB5
    双精度转单精度 = 0xB6
    
    # 类型转换 - f64 (0xB7-0xBF)
    转换32位有符号双精度 = 0xB7
    转换32位无符号双精度 = 0xB8
    转换64位有符号双精度 = 0xB9
    转换64位无符号双精度 = 0xBA
    单精度转双精度 = 0xBB
    
    # 位运算与 reinterpret (0xBC-0xBF)
    位reinterpret32 = 0xBC
    位reinterpret64 = 0xBD
    扩展8位有符号32 = 0xC0
    扩展16位有符号32 = 0xC1
    扩展8位有符号64 = 0xC2
    扩展16位有符号64 = 0xC3
    扩展32位有符号64 = 0xC4


class 值类型(IntEnum):
    """WebAssembly 值类型"""
    空类型 = 0x40
    函数类型 = 0x60
    外部函数 = 0x00
    外部表 = 0x01
    外部内存 = 0x02
    外部全局 = 0x03
    
    整数32 = 0x7F
    整数64 = 0x7E
    单精度浮点 = 0x7D
    双精度浮点 = 0x7C


class 块类型(IntEnum):
    """WebAssembly 块类型"""
    空块 = 0x40


class 段类型(IntEnum):
    """WebAssembly 段类型标识"""
    自定义段 = 0
    类型段 = 1
    导入段 = 2
    函数段 = 3
    表段 = 4
    内存段 = 5
    全局段 = 6
    导出段 = 7
    起始段 = 8
    元素段 = 9
    代码段 = 10
    数据段 = 11


class 导出类型(IntEnum):
    """WebAssembly 导出类型"""
    函数导出 = 0
    表导出 = 1
    内存导出 = 2
    全局导出 = 3
